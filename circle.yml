machine: 
  node:
    version: 7.7.4

dependencies:
  pre:
    - sudo apk add --update wget ca-certificates
    - cd /tmp/
    - wget https://github.com/spf13/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz
    - tar xzf hugo_${HUGO_VERSION}_Linux-64bit.tar.gz
    - rm -r hugo_${HUGO_VERSION}_Linux-64bit.tar.gz
    - sudo mv hugo*/hugo* /usr/bin/hugo
    - sudo apk del wget ca-certificates
    - rm /var/cache/apk/*
  override: 
    - npm install -g gulp
    - npm install -g bower
    - npm install

deployment:
  staging: 
    branch: develop
    commands: 
      - gulp build
      - hugo -s ./annachristoffer -b http://annachristoffer.build --config=./annachristoffer/config.build.toml -d ../public

