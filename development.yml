version: '3'

services:
  ac-site:
    container_name: 'gohugo'
    environment: 
      - HUGO_TITLE=Anna Claire Christoffer
    build:
      context: .
      dockerfile: .docker/Dockerfile
    volumes:
      - ./:/opt
    ports: 
      - "1313:1313"
    command: hugo server -s /opt/annachristoffer -b http://annachristoffer.dev/ --config=/opt/annachristoffer/config.dev.toml --bind "0.0.0.0"

  ac-nginx:
    container_name: 'nginx'
    build:
      context: .docker/nginx
      dockerfile: Dockerfile
    volumes: 
      - ./media:/opt/media
    links: 
      - ac-site
    ports:
      - "80:80"

volumes:
  data:
    driver: 'local'